SCC[grep("combustion",SCC$SCC.Level.Five,ignore.case=TRUE),1]
SCC[grep("combustion",SCC$SCC.Level.Six,ignore.case=TRUE),1]
length(SCC[grep("combustion",SCC$SCC.Level.Six,ignore.case=TRUE),1])
length(SCC[grep("combustion",SCC$SCC.Level.Five,ignore.case=TRUE),1])
length(SCC[grep("combustion",SCC$SCC.Level.Four,ignore.case=TRUE),1])
length(SCC[grep("combustion",SCC$SCC.Level.Three,ignore.case=TRUE),1])
length(SCC[grep("combustion",SCC$SCC.Level.Two,ignore.case=TRUE),1])
length(SCC[grep("combustion",SCC$SCC.Level.One,ignore.case=TRUE),1])
length(SCC[grep("coal",SCC$SCC.Level.One,ignore.case=TRUE),1])
length(SCC[grep("coal",SCC$SCC.Level.Two,ignore.case=TRUE),1])
length(SCC[grep("coal",SCC$SCC.Three.Two,ignore.case=TRUE),1])
length(SCC[grep("coal",SCC$SCC.Level.Two,ignore.case=TRUE),1])
length(SCC[grep("coal",SCC$SCC.Level.Three,ignore.case=TRUE),1])
length(SCC[grep("coal",SCC$SCC.Level.Four,ignore.case=TRUE),1])
length(SCC[grep("coal",SCC$SCC.Level.Five,ignore.case=TRUE),1])
length(SCC[grep("combustion",SCC$SCC.Level.Five,ignore.case=TRUE),1])
length(SCC[grep("combustion",SCC$SCC.Level.One,ignore.case=TRUE) & grep("coal",SCC$SCC.Level.Three,ignore.case=TRUE),1])
length(SCC[grep("combustion",SCC$SCC.Level.One,ignore.case=TRUE) || grep("coal",SCC$SCC.Level.Three,ignore.case=TRUE),1])
length(SCC)
length(SCC$SCC)
length(SCC[grep("coal combustion",SCC$SCC.Level.One,ignore.case=TRUE),1])
length(SCC[grep("coal combustion",SCC$SCC.Level.One,ignore.case=TRUE),1])
length(SCC[grep("combustion",SCC$SCC.Level.One,ignore.case=TRUE) && grep("coal",SCC$SCC.Level.Three,ignore.case=TRUE),1])
length(SCC[grep("combustion",SCC$SCC.Level.One,ignore.case=TRUE) & grep("coal",SCC$SCC.Level.Three,ignore.case=TRUE),1])
combustion<-as.data.frame(SCC[grep("combustion",SCC$SCC.Level.One,ignore.case=TRUE) & grep("coal",SCC$SCC.Level.Three,ignore.case=TRUE),1])
head(SCC)
unque(SCC$Short.Name)
unique(SCC$Short.Name)
length(SCC[grep("combustion",SCC$Short.Name,ignore.case=TRUE),1])
length(SCC[grep("coal",SCC$Short.Name,ignore.case=TRUE),1])
length(SCC[grep("coal combustion",SCC$Short.Name,ignore.case=TRUE),1])
df <- subset(SCC, select = c("SCC", "Short.Name"))
head(df)
NEI_SCC <- merge(NEI, df, by.x="SCC", by.y="SCC", all=TRUE)
head(NEI_SCC)
length(NEI_SCC)
NEI_SCC
height(NEI_SCC)
rows(NEI_SCC)
tail(NEI_SCC)
data <- subset(NEI_SCC, grepl('coal',NEI_SCC$Short.Name, fixed=TRUE), c("Emissions", "Year","type", "Short.Name"))
data <- subset(NEI_SCC, grepl('coal',NEI_SCC$Short.Name, fixed=TRUE), c("emissions", "year","type", "Short.Name"))
data <- subset(NEI_SCC, grepl('coal',NEI_SCC$Short.Name, fixed=TRUE), c("Emissions", "year","type", "Short.Name"))
head(data)
plotdata<-ddply(data,.(year),summarize,sum=sum(Emissions))
#png("plot4.png")
gggplot(data=plotdata, aes(x=Year, y=Emissions)) + geom_line() + geom_point( size=4, shape=21, fill="white")
+ xlab("Year") + ylab("Emissions (thousands of tons)") + ggtitle("Total United States PM2.5 Coal Emissions")
head(plotdata)
ggplot(data=plotdata, aes(x=Year, y=Emissions)) + geom_line() + geom_point( size=4, shape=21, fill="white")
+ xlab("Year") + ylab("Emissions (thousands of tons)") + ggtitle("Total United States PM2.5 Coal Emissions")
ggplot(data=plotdata, aes(x=year, y=Emissions)) + geom_line() + geom_point( size=4, shape=21, fill="white")
+ xlab("Year") + ylab("Emissions (thousands of tons)") + ggtitle("Total United States PM2.5 Coal Emissions")
ggplot(data=plotdata, aes(x=year, y=Emissions)) + geom_line() + geom_point( size=4, shape=21, fill="white")
ggplot(data=plotdata, aes(x=year, y=sum)) + geom_line() + geom_point( size=4, shape=21, fill="white")
+ xlab("Year") + ylab("Emissions (thousands of tons)") + ggtitle("Total United States PM2.5 Coal Emissions")
ggplot(data=plotdata, aes(x=year, y=sum)) + geom_line() + geom_point( size=4, shape=21, fill="white")
ggplot(data=plotdata, aes(x=year, y=sum)) + geom_line() + geom_point( size=4, shape=21, fill="white")
plotdata<- aggregate(emissions ~ year, data, sum)
plotdata<- aggregate(Emissions ~ year, data, sum)
ggplot(data=plotdata, aes(x=year, y=sum)) + geom_line() + geom_point( size=4, shape=21, fill="white")
+ xlab("Year") + ylab("Emissions (thousands of tons)") + ggtitle("Total United States PM2.5 Coal Emissions")
ggplot(data=plotdata, aes(x=year, y=sum)) + geom_line() + geom_point( size=4, shape=21, fill="white") + xlab("Year") + ylab("Emissions (thousands of tons)") + ggtitle("Total United States PM2.5 Coal Emissions")
data<-transform(data,year=factor(year))
#Plot Data
plotdata<- aggregate(Emissions ~ year, data, sum)
#png("plot4.png")
ggplot(data=plotdata, aes(x=year, y=sum)) + geom_line() + geom_point( size=4, shape=21, fill="white") + xlab("Year") + ylab("Emissions (thousands of tons)") + ggtitle("Total United States PM2.5 Coal Emissions")
#dev.off()
NEI_SCC$Emissions <- NEI_SCC$Emissions/1000
data <- subset(NEI_SCC, grepl('Coal',NEI_SCC$Short.Name, fixed=TRUE), c("Emissions", "year","type", "Short.Name"))
data<-transform(data,year=factor(year))
#Plot Data
plotdata<- aggregate(Emissions ~ year, data, sum)
#png("plot4.png")
ggplot(data=plotdata, aes(x=year, y=sum)) + geom_line() + geom_point( size=4, shape=21, fill="white") + xlab("Year") + ylab("Emissions (thousands of tons)") + ggtitle("Total United States PM2.5 Coal Emissions")
#dev.off()
ggplot(data=plotdata, aes(x=year, y=sum)) + geom_line() + geom_point( size=4, shape=21, fill="white")
ggplot(data=plotdata, aes(x=year, y=sum)) + geom_line()
ggplot(data=plotdata, aes(x=year, y=Emissions)) + geom_line() + geom_point( size=4, shape=21, fill="white") + xlab("Year") + ylab("Emissions (thousands of tons)") + ggtitle("Total United States PM2.5 Coal Emissions")
#dev.off()
ggplot(data=plotdata, aes(x=year, y=Emissions)) + geom_line()
ggplot(data=plotdata, aes(x=year, y=Emissions)) + geom_line()
ggplot(data=plotdata, aes(x=year, y=Emissions)) + geom_line(size=1.5)
ggplot(plotdata, aes(x=year, y=Emissions)) + geom_line(size=1.5) + geom_point( size=4, shape=21, fill="white") + xlab("Year") + ylab("Emissions (thousands of tons)") + ggtitle("Total United States PM2.5 Coal Emissions")
plotData
plotdata
ggplot(plotdata, aes(x=year, y=Emissions))
ggplot(plotdata, aes(x=year, y=Emissions)) + geom_line()
ggplot(plotdata, aes(x=year, y=Emissions,group=1)) + geom_line() + geom_point( size=4, shape=21, fill="white") + xlab("Year") + ylab("Emissions (thousands of tons)") + ggtitle("Total United States PM2.5 Coal Emissions")
ggplot(plotdata, aes(x=year, y=Emissions,group=1)) + geom_line(size=2) + geom_point( size=4, shape=21, fill="white") + xlab("Year") + ylab("Emissions (thousands of tons)") + ggtitle("Total United States PM2.5 Coal Emissions")
ggplot(plotdata, aes(x=year, y=Emissions,group=1)) + geom_line(size=1.5) + geom_point( size=4, shape=21, fill="white") + xlab("Year") + ylab("Emissions (thousands of tons)") + ggtitle("Total United States PM2.5 Coal Emissions")
#dev.off()
ggplot(plotdata, aes(x=year, y=Emissions,group=1)) + geom_line(size=1) + geom_point( size=4, shape=21, fill="white") + xlab("Year") + ylab("Emissions (thousands of tons)") + ggtitle("Total United States PM2.5 Coal Emissions")
#dev.off()
ggplot(plotdata, aes(x=year, y=Emissions,group=1)) + geom_line(size=1) + geom_point( size=5, shape=21, fill="white") + xlab("Year") + ylab("Emissions (thousands of tons)") + ggtitle("Total United States PM2.5 Coal Emissions")
#dev.off()
data <- subset(NEI_SCC, fips == "24510" & type =="ON-ROAD", c("Emissions", "Year","type"))
data<-transform(data,year=factor(year))
#Plot Data
plotdata<- aggregate(Emissions ~ year, data, sum)
#png("plot4.png")
ggplot(plotdata, aes(x=year, y=Emissions,group=1)) + geom_line(size=1) + geom_point( size=5, shape=21, fill="white") + xlab("Year") + ylab("Emissions (thousands of tons)") + ggtitle("Motor Vehicle PM2.5 Emissions in Baltimore")
#dev.off()
data <- subset(NEI_SCC, fips == "24510" & type =="ON-ROAD", c("Emissions", "year","type"))
data<-transform(data,year=factor(year))
#Plot Data
plotdata<- aggregate(Emissions ~ year, data, sum)
#png("plot4.png")
ggplot(plotdata, aes(x=year, y=Emissions,group=1)) + geom_line(size=1) + geom_point( size=5, shape=21, fill="white") + xlab("Year") + ylab("Emissions (thousands of tons)") + ggtitle("Motor Vehicle PM2.5 Emissions in Baltimore")
#dev.off()
data <- subset(NEI_SCC, (fips == "24510" | fips == "06037") & type =="ON-ROAD", c("Emissions", "Year","type", "fips"))
plot_6<-transform(data,year=factor(year))
plot_6 <- rename(plot_6, c("fips"="City"))
plot_6$City <- factor(plot_6$City, levels=c("06037", "24510"), labels=c("Los Angeles, CA", "Baltimore, MD"))
plot_6 <- melt(plot_6, id=c("Year", "City"), measure.vars=c("Emissions"))
plot_6 <- dcast(plot_6, City + Year ~ variable, sum)
plot_6[2:8,"Change"] <- diff(plot_6$Emissions)
plot_6[c(1,5),4] <- 0
#png("plot6.png")
ggplot(data=plot_6, aes(x=Year, y=Change, group=City, color=City)) + geom_line() + geom_point( size=4, shape=21, fill="white") + xlab("Year") + ylab("Change in Emissions (tons)") + ggtitle("Motor Vehicle PM2.5 Emissions Changes: Baltimore vs. LA")
#dev.off()
data <- subset(NEI_SCC, (fips == "24510" | fips == "06037") & type =="ON-ROAD", c("Emissions", "year","type", "fips"))
plot_6<-transform(data,year=factor(year))
plot_6 <- rename(plot_6, c("fips"="City"))
plot_6$City <- factor(plot_6$City, levels=c("06037", "24510"), labels=c("Los Angeles, CA", "Baltimore, MD"))
plot_6 <- melt(plot_6, id=c("year", "City"), measure.vars=c("Emissions"))
plot_6 <- dcast(plot_6, City + Year ~ variable, sum)
plot_6[2:8,"Change"] <- diff(plot_6$Emissions)
plot_6[c(1,5),4] <- 0
#png("plot6.png")
ggplot(data=plot_6, aes(x=year, y=Change, group=City, color=City)) + geom_line() + geom_point( size=4, shape=21, fill="white") + xlab("Year") + ylab("Change in Emissions (tons)") + ggtitle("Motor Vehicle PM2.5 Emissions Changes: Baltimore vs. LA")
#dev.off()
data <- subset(NEI_SCC, (fips == "24510" | fips == "06037") & type =="ON-ROAD", c("Emissions", "year","type", "fips"))
plot_6<-transform(data,year=factor(year))
plot_6 <- rename(plot_6, c("fips"="City"))
plot_6$City <- factor(plot_6$City, levels=c("06037", "24510"), labels=c("Los Angeles, CA", "Baltimore, MD"))
plot_6 <- melt(plot_6, id=c("year", "City"), measure.vars=c("Emissions"))
plot_6 <- dcast(plot_6, City + Year ~ variable, sum)
library("plyr")
library("ggplot2")
library(reshape2)
plot_6<-transform(data,year=factor(year))
plot_6 <- rename(plot_6, c("fips"="City"))
plot_6$City <- factor(plot_6$City, levels=c("06037", "24510"), labels=c("Los Angeles, CA", "Baltimore, MD"))
plot_6 <- melt(plot_6, id=c("year", "City"), measure.vars=c("Emissions"))
plot_6 <- dcast(plot_6, City + Year ~ variable, sum)
plot_6[2:8,"Change"] <- diff(plot_6$Emissions)
plot_6[c(1,5),4] <- 0
#png("plot6.png")
ggplot(data=plot_6, aes(x=year, y=Change, group=City, color=City)) + geom_line() + geom_point( size=4, shape=21, fill="white") + xlab("Year") + ylab("Change in Emissions (tons)") + ggtitle("Motor Vehicle PM2.5 Emissions Changes: Baltimore vs. LA")
#dev.off()
plot_6<-transform(data,year=factor(year))
plot_6 <- rename(plot_6, c("fips"="City"))
plot_6$City <- factor(plot_6$City, levels=c("06037", "24510"), labels=c("Los Angeles, CA", "Baltimore, MD"))
plot_6 <- melt(plot_6, id=c("year", "City"), measure.vars=c("Emissions"))
plot_6 <- dcast(plot_6, City + year ~ variable, sum)
plot_6[2:8,"Change"] <- diff(plot_6$Emissions)
plot_6[c(1,5),4] <- 0
#png("plot6.png")
ggplot(data=plot_6, aes(x=year, y=Change, group=City, color=City)) + geom_line() + geom_point( size=4, shape=21, fill="white") + xlab("Year") + ylab("Change in Emissions (tons)") + ggtitle("Motor Vehicle PM2.5 Emissions Changes: Baltimore vs. LA")
#dev.off()
df <- subset(SCC, select = c("SCC", "Short.Name"))
NEI_SCC <- merge(NEI, df, by.x="SCC", by.y="SCC", all=TRUE)
NEI_SCC$Emissions <- NEI_SCC$Emissions/1000
data <- subset(NEI_SCC, grepl('Coal',NEI_SCC$Short.Name, fixed=TRUE), c("Emissions", "year","type", "Short.Name"))
data<-transform(data,year=factor(year))
#Plot Data
plotdata<- aggregate(Emissions ~ year, data, sum)
png("plot4.png")
ggplot(plotdata, aes(x=year, y=Emissions,group=1)) + geom_line(size=1) + geom_point( size=5, shape=21, fill="white") + xlab("Year") + ylab("Emissions (thousands of tons)") + ggtitle("Total United States PM2.5 Coal Emissions")
dev.off()
NEI_SCC$Emissions <- NEI_SCC$Emissions/1000
data <- subset(NEI_SCC, fips == "24510" & type =="ON-ROAD", c("Emissions", "year","type"))
data<-transform(data,year=factor(year))
#Plot Data
plotdata<- aggregate(Emissions ~ year, data, sum)
png("plot5.png")
ggplot(plotdata, aes(x=year, y=Emissions,group=1)) + geom_line(size=1) + geom_point( size=5, shape=21, fill="white") + xlab("Year") + ylab("Emissions (thousands of tons)") + ggtitle("Motor Vehicle PM2.5 Emissions in Baltimore")
dev.off()
NEI_SCC$Emissions <- NEI_SCC$Emissions/1000
data <- subset(NEI_SCC, (fips == "24510" | fips == "06037") & type =="ON-ROAD", c("Emissions", "year","type", "fips"))
plot_6<-transform(data,year=factor(year))
plot_6 <- rename(plot_6, c("fips"="City"))
plot_6$City <- factor(plot_6$City, levels=c("06037", "24510"), labels=c("Los Angeles, CA", "Baltimore, MD"))
plot_6 <- melt(plot_6, id=c("year", "City"), measure.vars=c("Emissions"))
plot_6 <- dcast(plot_6, City + year ~ variable, sum)
plot_6[2:8,"Change"] <- diff(plot_6$Emissions)
plot_6[c(1,5),4] <- 0
png("plot6.png")
ggplot(data=plot_6, aes(x=year, y=Change, group=City, color=City)) + geom_line() + geom_point( size=4, shape=21, fill="white") + xlab("Year") + ylab("Change in Emissions (tons)") + ggtitle("Motor Vehicle PM2.5 Emissions Changes: Baltimore vs. LA")
dev.off()
NEI_SCC$Emissions <- NEI_SCC$Emissions * 1000
data <- subset(NEI_SCC, (fips == "24510" | fips == "06037") & type =="ON-ROAD", c("Emissions", "year","type", "fips"))
plot_6<-transform(data,year=factor(year))
plot_6 <- rename(plot_6, c("fips"="City"))
plot_6$City <- factor(plot_6$City, levels=c("06037", "24510"), labels=c("Los Angeles, CA", "Baltimore, MD"))
plot_6 <- melt(plot_6, id=c("year", "City"), measure.vars=c("Emissions"))
plot_6 <- dcast(plot_6, City + year ~ variable, sum)
plot_6[2:8,"Change"] <- diff(plot_6$Emissions)
plot_6[c(1,5),4] <- 0
png("plot6.png")
ggplot(data=plot_6, aes(x=year, y=Change, group=City, color=City)) + geom_line() + geom_point( size=4, shape=21, fill="white") + xlab("Year") + ylab("Change in Emissions (tons)") + ggtitle("Motor Vehicle PM2.5 Emissions Changes: Baltimore vs. LA")
dev.off()
data <- subset(NEI_SCC, fips == "24510" & type =="ON-ROAD", c("Emissions", "year","type"))
data<-transform(data,year=factor(year))
#Plot Data
plotdata<- aggregate(Emissions ~ year, data, sum)
png("plot5.png")
ggplot(plotdata, aes(x=year, y=Emissions,group=1)) + geom_line(size=1) + geom_point( size=5, shape=21, fill="white") + xlab("Year") + ylab("Emissions (tons)") + ggtitle("Motor Vehicle PM2.5 Emissions in Baltimore")
dev.off()
data <- subset(NEI_SCC, fips == "24510" & type =="ON-ROAD", c("Emissions", "year","type"))
data<-transform(data,year=factor(year))
#Plot Data
plotdata<- aggregate(Emissions ~ year, data, sum)
png("plot5.png")
ggplot(plotdata, aes(x=year, y=Emissions,group=1)) + geom_line(size=1) + geom_point( size=5, shape=21, fill="white") + xlab("Year") + ylab("Emissions (tons)") + ggtitle("Motor Vehicle PM2.5 Emissions in Baltimore")
dev.off()
setwd("c:/Coursera/Exdata-Proj2")
library("plyr")
# Load data
if(!exists("NEI")) {
NEI <- readRDS("data/summarySCC_PM25.rds")
}
if(!exists("SCC")) {
SCC <- readRDS("data/Source_Classification_Code.rds")
}
data<-transform(NEI,year=factor(year))
head(data)
#Generate plot1.png
sumData <- ddply(data,c("year"),summarize,sum=sum(Emissions))
#png("plot1.png")
plot(sumData$year,sumData$sum,type="n",xlab="Year",ylab="PM2.5 Emission",main="Total PM2.5 Emissions",boxwex=0.03,)
lines(sumData$year,sumData$sum)
#dev.off()
plot(sumData$year,sumData$sum,type="n",xlab="Year",ylab="PM2.5 Emission",main="Total US PM2.5 Emissions")
plot(sumData$year,sumData$sum,type="b",xlab="Year",ylab="PM2.5 Emission",main="Total US PM2.5 Emissions")
plot(sumData$year,sumData$sum,"b",xlab="Year",ylab="PM2.5 Emission",main="Total US PM2.5 Emissions")
plot(sumData$year,sumData$sum,"b",xlab="Year",ylab="PM2.5 Emission",main="Total US PM2.5 Emissions")
plot(sumData$year,sumData$sum,"b",xlab="Year",ylab="PM2.5 Emission",main="Total US PM2.5 Emissions",xaxt="n")
plot(sumData$year,sumData$sum,"p",xlab="Year",ylab="Emissions",main="Total US PM2.5 Emissions",xaxt="n")
lines(sumData$year,sumData$sum)
plot(sumData$year,sumData$sum,"bc",xlab="Year",ylab="Emissions",main="Total US PM2.5 Emissions",xaxt="n")
lines(sumData$year,sumData$sum)
plot(sumData$year,sumData$sum,"bc",xlab="Year",ylab="Emissions",main="Total US PM2.5 Emissions",xaxt="n",boxwex=0.03)
lines(sumData$year,sumData$sum)
plot(sumData$year,sumData$sum,"bc",xlab="Year",ylab="Emissions",main="Total US PM2.5 Emissions",boxwex=0.03)
lines(sumData$year,sumData$sum)
sumData <- ddply(data,c("year"),summarize,Emissions=sum(Emissions))
plot(sumData$Year,sumData$Emissions, main="Total US PM2.5 Emissions", "b", xlab="Year", ylab="Emissions (thousands of tons)",xaxt="n")
axis(side=1, at=c("1999", "2002", "2005", "2008"))
plot(sumData$Year,sumData$Emissions, main="Total US PM2.5 Emissions", "b", xlab="Year", ylab="Emissions (thousands of tons)")
sumData
plot(sumData$year,sumData$Emissions, main="Total US PM2.5 Emissions", "b", xlab="Year", ylab="Emissions (thousands of tons)")
axis(side=1, at=c("1999", "2002", "2005", "2008"))
plot(sumData$year,sumData$Emissions,size=2,xlab="Year",ylab="Emissions",main="Total US PM2.5 Emissions",boxwex=0.03)
lines(sumData$year,sumData$sum)
plot(sumData$year,sumData$Emissions,size=2,xlab="Year",ylab="Emissions",main="Total US PM2.5 Emissions",boxwex=0.03)
lines(sumData$year,sumData$Emissions)
plot(sumData$year,sumData$Emissions,size=4,xlab="Year",ylab="Emissions",main="Total US PM2.5 Emissions",boxwex=0.03)
lines(sumData$year,sumData$Emissions)
plot(sumData$year,sumData$Emissions,xlab="Year",ylab="Emissions",main="Total US PM2.5 Emissions",boxwex=0.1)
lines(sumData$year,sumData$Emissions)
plot(sumData$year,sumData$Emissions,type="p",xlab="Year",ylab="Emissions",main="Total US PM2.5 Emissions",boxwex=0.1)
lines(sumData$year,sumData$Emissions)
plot(sumData$year,sumData$Emissions,type="p",xlab="Year",ylab="Emissions",main="Total US PM2.5 Emissions",boxwex=0.1)
lines(sumData$year,sumData$Emissions)
data <- NEI
head(data)
#Generate plot1.png
sumData <- ddply(data,c("year"),summarize,Emissions=sum(Emissions))
#plot(sumData$year,sumData$Emissions, main="Total US PM2.5 Emissions", "b", xlab="Year", ylab="Emissions (thousands of tons)")
#axis(side=1, at=c("1999", "2002", "2005", "2008"))
#png("plot1.png")
plot(sumData$year,sumData$Emissions,type="p",xlab="Year",ylab="Emissions",main="Total US PM2.5 Emissions",boxwex=0.1)
lines(sumData$year,sumData$Emissions)
#dev.off()
data<-transform(NEI,year=factor(year))
head(data)
#Generate plot1.png
sumData <- ddply(data,c("year"),summarize,Emissions=sum(Emissions))
#plot(sumData$year,sumData$Emissions, main="Total US PM2.5 Emissions", "b", xlab="Year", ylab="Emissions (thousands of tons)")
#axis(side=1, at=c("1999", "2002", "2005", "2008"))
#png("plot1.png")
plot(sumData$year,sumData$Emissions,type="p",xlab="Year",ylab="Emissions",main="Total US PM2.5 Emissions",boxwex=0.1)
lines(sumData$year,sumData$Emissions)
#dev.off()
data<-transform(NEI,year=factor(year))
head(data)
#Generate plot1.png
sumData <- ddply(data,c("year"),summarize,Emissions=sum(Emissions))
#plot(sumData$year,sumData$Emissions, main="Total US PM2.5 Emissions", "b", xlab="Year", ylab="Emissions (thousands of tons)")
#axis(side=1, at=c("1999", "2002", "2005", "2008"))
#png("plot1.png")
plot(sumData$year,sumData$Emissions,type="p",xlab="Year",ylab="Emissions",main="Total US PM2.5 Emissions",boxwex=0.1)
lines(sumData$year,sumData$Emissions)
#dev.off()
NEI_SCC$Emissions <- NEI_SCC$Emissions/1000
data<-transform(NEI,year=factor(year))
head(data)
#Generate plot1.png
sumData <- ddply(data,c("year"),summarize,Emissions=sum(Emissions))
#plot(sumData$year,sumData$Emissions, main="Total US PM2.5 Emissions", "b", xlab="Year", ylab="Emissions (thousands of tons)")
#axis(side=1, at=c("1999", "2002", "2005", "2008"))
#png("plot1.png")
plot(sumData$year,sumData$Emissions,type="p",xlab="Year",ylab="Emissions (thousands of tons)",main="Total US PM2.5 Emissions",boxwex=0.1)
lines(sumData$year,sumData$Emissions)
data<-transform(NEI,year=factor(year))
data$Emissions <- data$Emissions/1000
head(data)
#Generate plot1.png
sumData <- ddply(data,c("year"),summarize,Emissions=sum(Emissions))
#plot(sumData$year,sumData$Emissions, main="Total US PM2.5 Emissions", "b", xlab="Year", ylab="Emissions (thousands of tons)")
#axis(side=1, at=c("1999", "2002", "2005", "2008"))
#png("plot1.png")
plot(sumData$year,sumData$Emissions,type="p",xlab="Year",ylab="Emissions (thousands of tons)",main="Total US PM2.5 Emissions",boxwex=0.1)
lines(sumData$year,sumData$Emissions)
#Process data
data<-transform(NEI,year=factor(year))
data$Emissions <- data$Emissions/1000
head(data)
sumData <- ddply(data,c("year"),summarize,Emissions=sum(Emissions))
head(sumData)
#Generate plot1.png
#png("plot1.png")
plot(sumData$year,sumData$Emissions,type="p",xlab="Year",ylab="Emissions (thousands of tons)",main="Total US PM2.5 Emissions",boxwex=0.1)
lines(sumData$year,sumData$Emissions)
#dev.off()
plot(sumData$year,sumData$Emissions,type="P",xlab="Year",ylab="Emissions (thousands of tons)",main="Total US PM2.5 Emissions",boxwex=0.1)
lines(sumData$year,sumData$Emissions)
plot(sumData$year,sumData$Emissions,type="o",xlab="Year",ylab="Emissions (thousands of tons)",main="Total US PM2.5 Emissions",boxwex=0.1)
plot(sumData$year,sumData$Emissions,type="n",xlab="Year",ylab="Emissions (thousands of tons)",main="Total US PM2.5 Emissions",boxwex=0.1)
lines(sumData$year,sumData$Emissions)
plot(sumData$year,sumData$Emissions,type="p",xlab="Year",ylab="Emissions (thousands of tons)",main="Total US PM2.5 Emissions",boxwex=0.1)
lines(sumData$year,sumData$Emissions)
#Generate plot1.png
png("plot1.png")
plot(sumData$year,sumData$Emissions,type="p",xlab="Year",ylab="Emissions (thousands of tons)",main="Total US PM2.5 Emissions",boxwex=0.1)
lines(sumData$year,sumData$Emissions)
dev.off()
data<-transform(NEI,year=factor(year))
data <- data[data$fips=="24510"]
head(data)
sumData <- ddply(data,c("year"),summarize,sum=sum(Emissions))
plot(sumData$year,sumData$sum,type="n",xlab="Year",ylab="PM2.5 Emission",main="Total PM2.5 Emissions in Baltimore City",boxwex=0.03,)
lines(sumData$year,sumData$sum)
data<-transform(NEI,year=factor(year))
data <- data[data$fips=="24510"]
data$Emissions <- data$Emissions/1000
head(data)
sumData <- ddply(data,c("year"),summarize,Emissions=sum(Emissions))
head(sumData)
plot(sumData$year,sumData$Emissions,type="n",xlab="Year",ylab="Emissions (thousands of tons)",main="Total PM2.5 Emissions in Baltimore City",boxwex=0.03,)
lines(sumData$year,sumData$Emissions)
plot(sumData$year,sumData$Emissions,type="n",xlab="Year",ylab="Emissions (thousands of tons)",main="Total PM2.5 Emissions in Baltimore City",boxwex=0.05)
lines(sumData$year,sumData$Emissions)
plot(sumData$year,sumData$Emissions,type="n",xlab="Year",ylab="Emissions (thousands of tons)",
main="Total PM2.5 Emissions in Baltimore City",boxwex=0.05)
lines(sumData$year,sumData$Emissions)
png("plot2.png")
plot(sumData$year,sumData$Emissions,type="n",xlab="Year",ylab="Emissions (thousands of tons)",
main="Total PM2.5 Emissions in Baltimore City",boxwex=0.05)
lines(sumData$year,sumData$Emissions)
dev.off()
data<-transform(NEI,year=factor(year))
data <- data[data$fips=="24510"]
head(data)
#Generate plot1.png
sumData <- ddply(data,c("year","type"),summarize,sum=sum(Emissions))
p <- ggplot(sumData,aes(x=year,y=sum)) + geom_point()
p  + facet_grid(.~type)+labs(title="Total PM2.5 Emissions in Baltimore city by Type and Year",
y="Emissions", x = "Year")
data<-transform(NEI,year=factor(year))
data <- data[data$fips=="24510"]
data$Emissions <- data$Emissions/1000
head(data)
sumData <- ddply(data,c("year","type"),summarize,Emissions=sum(Emissions))
p <- ggplot(sumData,aes(x=year,y=Emissions)) + geom_point()
p  + facet_grid(.~type)+labs(title="Total PM2.5 Emissions in Baltimore city by Type and Year",
y="Emissions (thousands of tons)", x = "Year")
#Process data
data<-transform(NEI,year=factor(year))
data <- data[data$fips=="24510"]
data$Emissions <- data$Emissions/1000
head(data)
sumData <- ddply(data,c("year","type"),summarize,Emissions=sum(Emissions))
#Generate plot1.png
png("plot3.png")
p <- ggplot(sumData,aes(x=year,y=Emissions)) + geom_point()
p  + facet_grid(.~type)+labs(title="Total PM2.5 Emissions in Baltimore city by Type and Year",
y="Emissions (thousands of tons)", x = "Year")
dev.off()
if(!exists("NEI_SCC")) {
df <- subset(SCC, select = c("SCC", "Short.Name"))
NEI_SCC <- merge(NEI, df, by.x="SCC", by.y="SCC", all=TRUE)
}
data <- subset(NEI_SCC, grepl('Coal',NEI_SCC$Short.Name, fixed=TRUE), c("Emissions", "year","type", "Short.Name"))
data<-transform(data,year=factor(year))
data$Emissions <- data$Emissions/1000
plotdata<- aggregate(Emissions ~ year, data, sum)
ggplot(plotdata, aes(x=year, y=Emissions,group=1)) + geom_line(size=1) +
geom_point( size=5, shape=21, fill="white") + xlab("Year") +
ylab("Emissions (thousands of tons)") + ggtitle("Total United States PM2.5 Coal Emissions")
data <- subset(NEI_SCC, grepl('Coal',NEI_SCC$Short.Name, fixed=TRUE), c("Emissions", "year","type", "Short.Name"))
data<-transform(data,year=factor(year))
data$Emissions <- data$Emissions/1000
plotdata<- aggregate(Emissions ~ year, data, sum)
ggplot(plotdata, aes(x=year, y=Emissions,group=1)) + geom_line(size=1) +
geom_point( size=5, shape=21, fill="white") + xlab("Year") +
ylab("Emissions (thousands of tons)") + ggtitle("Total United States PM2.5 Coal Emissions")
data <- subset(NEI_SCC, grepl('Coal',NEI_SCC$Short.Name, fixed=TRUE), c("Emissions", "year","type", "Short.Name"))
data<-transform(data,year=factor(year))
head(data)
data$Emissions <- data$Emissions/1000
head(data)
plotdata<- aggregate(Emissions ~ year, data, sum)
plotdata<- aggregate(Emissions ~ year, data, sum)
head(plotdata)
head(NEI)
head(NEI_SCC)
df <- subset(SCC, select = c("SCC", "Short.Name"))
NEI_SCC <- merge(NEI, df, by.x="SCC", by.y="SCC", all=TRUE)
data <- subset(NEI_SCC, grepl('Coal',NEI_SCC$Short.Name, fixed=TRUE), c("Emissions", "year","type", "Short.Name"))
data<-transform(data,year=factor(year))
data$Emissions <- data$Emissions/1000
plotdata<- aggregate(Emissions ~ year, data, sum)
head(plotdata)
ggplot(plotdata, aes(x=year, y=Emissions,group=1)) + geom_line(size=1) +
geom_point( size=5, shape=21, fill="white") + xlab("Year") +
ylab("Emissions (thousands of tons)") + ggtitle("Total United States PM2.5 Coal Emissions")
png("plot4.png")
ggplot(plotdata, aes(x=year, y=Emissions,group=1)) + geom_line(size=1) +
geom_point( size=5, shape=21, fill="white") + xlab("Year") +
ylab("Emissions (thousands of tons)") + ggtitle("Total United States PM2.5 Coal Emissions")
dev.off()
data <- subset(NEI_SCC, fips == "24510" & type =="ON-ROAD", c("Emissions", "year","type"))
data<-transform(data,year=factor(year))
plotdata<- aggregate(Emissions ~ year, data, sum)
ggplot(plotdata, aes(x=year, y=Emissions,group=1)) + geom_line(size=1) +
geom_point( size=5, shape=21, fill="white") + xlab("Year") + ylab("Emissions (tons)") +
ggtitle("Motor Vehicle PM2.5 Emissions in Baltimore")
head(data)
head(plotdata)
data <- subset(NEI_SCC, (fips == "24510" | fips == "06037") & type =="ON-ROAD", c("Emissions", "year","type", "fips"))
plotData<-transform(data,year=factor(year))
plotData <- rename(plotData, c("fips"="City"))
plotData$City <- factor(plotData$City, levels=c("06037", "24510"), labels=c("Los Angeles, CA", "Baltimore, MD"))
plotData <- melt(plotData, id=c("year", "City"), measure.vars=c("Emissions"))
plotData <- dcast(plotData, City + year ~ variable, sum)
plotData[2:8,"Change"] <- diff(plotData$Emissions)
plotData[c(1,5),4] <- 0
ggplot(data=plotData, aes(x=year, y=Change, group=City, color=City)) + geom_line() +
geom_point( size=4, shape=21, fill="white") + xlab("Year") + ylab("Change in Emissions (tons)") +
ggtitle("Motor Vehicle PM2.5 Emissions Changes: Baltimore vs. LA")
data <- subset(NEI_SCC, (fips == "24510" | fips == "06037") & type =="ON-ROAD", c("Emissions", "year","type", "fips"))
head(data)
plotData<-transform(data,year=factor(year))
plotData <- rename(plotData, c("fips"="City"))
plotData<-transform(data,year=factor(year))
plotData$City <- factor(plotData$City, levels=c("06037", "24510"), labels=c("Los Angeles, CA", "Baltimore, MD"))
head(plotData)
data <- subset(NEI_SCC, (fips == "24510" | fips == "06037") & type =="ON-ROAD", c("Emissions", "year","type", "fips"))
plotData<-transform(data,year=factor(year))
plotData
length(pltData)
length(plotData)
str(plotData)
str(plotData[plotData$fips=='24510'])
str(plotData[plotData$fips==24510])
str(plotData[plotData$fips=="24510"])
str(plotData[plotData$fips=="24510",])
str(plotData[plotData$fips=="06037",])
head(plotData)
plotData <- rename(plotData, c("fips"="City"))
plotData <- rename(plotData, c("fips"="City"))
plotData <- rename(plotData, c("fips","City"))
head(plotData)
plotData <- subset(NEI_SCC, (fips == "24510" | fips == "06037") & type =="ON-ROAD", c("Emissions", "year","type", "fips"))
head(plotData)
plotData$City <- data$fips
head(plotData)
plotData$City <- factor(plotData$City, levels=c("06037", "24510"), labels=c("Los Angeles, CA", "Baltimore, MD"))
head(plotData)
plotData
plotData <- melt(plotData, id=c("year", "City"), measure.vars=c("Emissions"))
plotData
plotData <- dcast(plotData, City + year ~ variable, sum)
plotData
plotData[2:8,]
plotData
plotData[2:8,"Change"] <- diff(plotData$Emissions)
plotData
plotData[c(1,5),4] <- 0
plotData
#Generate plot6.png
png("plot6.png")
ggplot(data=plotData, aes(x=year, y=Change, group=City, color=City)) + geom_line() +
geom_point( size=4, shape=21, fill="white") + xlab("Year") + ylab("Change in Emissions (tons)") +
ggtitle("Motor Vehicle PM2.5 Emissions Changes: Baltimore vs. LA")
dev.off()
#Process data
data<-transform(NEI,year=factor(year))
data <- data[data$fips=="24510"]
data$Emissions <- data$Emissions/1000
head(data)
sumData <- ddply(data,c("year","type"),summarize,Emissions=sum(Emissions))
#Generate plot1.png
png("plot3.png",width = 640, height = 480)
p <- ggplot(sumData,aes(x=year,y=Emissions)) + geom_point()
p  + facet_grid(.~type)+labs(title="Total PM2.5 Emissions in Baltimore city by Type and Year",
y="Emissions (thousands of tons)", x = "Year")
dev.off()
